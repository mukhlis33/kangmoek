<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Voice to Text Profesional - Continuous</title>
<style>
*{box-sizing:border-box;}
body{
  margin:0;
  font-family:'Inter',sans-serif;
  background:#f7f7f7;
  color:#333;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  padding:20px;
}
.container{
  max-width:600px;
  width:100%;
  text-align:center;
  background:#fff;
  padding:25px 20px 40px 20px;
  border-radius:15px;
  box-shadow:0 10px 25px rgba(0,0,0,0.1);
}
h1{color:#1a73e8;margin-bottom:15px;}
select{
  margin-top:10px;
  padding:10px;
  border-radius:8px;
  border:1px solid #ccc;
  background:#fff;
  color:#333;
  font-size:16px;
  outline:none;
  width:100%;
}
textarea{
  width:100%;
  height:180px;
  border-radius:10px;
  border:1px solid #ccc;
  padding:15px;
  background:#fdfdfd;
  color:#333;
  font-size:16px;
  resize:none;
  outline:none;
  margin-top:15px;
}
textarea[readonly]{background:#f5f5f5;}
#timer{margin-top:10px;font-size:16px;color:#666;}
.button-group{margin-top:15px;}
button{
  margin:5px;
  padding:12px 25px;
  font-size:16px;
  border-radius:10px;
  border:none;
  cursor:pointer;
  transition:.2s;
}
button.start{background:#1a73e8;color:#fff;}
button.start:hover{background:#1765c1;}
button.stop{background:#d93025;color:#fff;}
button.stop:hover{background:#b1221b;}
button.copy{background:#34a853;color:#fff;}
button.copy:hover{background:#2c8a45;}
@media(max-width:500px){
  textarea{height:150px;}
  button, select{width:100%;margin:5px 0;}
}
</style>
</head>
<body>
<div class="container">
<h1>üéôÔ∏è Voice to Text Profesional</h1>

<select id="languageSelect">
  <option value="id-ID" selected>Bahasa Indonesia</option>
  <option value="en-US">English (US)</option>
  <option value="en-GB">English (UK)</option>
  <option value="ja-JP">Êó•Êú¨Ë™û</option>
  <option value="ko-KR">ÌïúÍµ≠Ïñ¥</option>
  <option value="fr-FR">Fran√ßais</option>
  <option value="es-ES">Espa√±ol</option>
  <option value="de-DE">Deutsch</option>
  <option value="zh-CN">‰∏≠Êñá (ÁÆÄ‰Ωì)</option>
  <option value="ar-SA">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
</select>

<textarea id="output" placeholder="Mulai berbicara..." readonly></textarea>

<span id="timer">00:00</span>

<div class="button-group">
  <button id="startBtn" class="start">Mulai Mendengarkan</button>
  <button id="stopBtn" class="stop" disabled>Berhenti</button>
  <button id="copyBtn" class="copy">Salin Teks</button>
</div>
</div>

<script>
const startBtn=document.getElementById("startBtn");
const stopBtn=document.getElementById("stopBtn");
const copyBtn=document.getElementById("copyBtn");
const output=document.getElementById("output");
const languageSelect=document.getElementById("languageSelect");
const timerEl=document.getElementById("timer");

let recognition, timerInterval, seconds=0, isRecording=false;

// Timer
function formatTime(s){
  const m=Math.floor(s/60).toString().padStart(2,'0');
  const sec=(s%60).toString().padStart(2,'0');
  return `${m}:${sec}`;
}
function startTimer(){seconds=0; timerEl.textContent="00:00"; timerInterval=setInterval(()=>{seconds++; timerEl.textContent=formatTime(seconds);},1000);}
function stopTimer(){clearInterval(timerInterval);}

// SpeechRecognition
const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;
if(!SpeechRecognition){
  alert("Browser Anda belum mendukung Speech Recognition API");
}else{
  recognition=new SpeechRecognition();
  recognition.continuous=true;       // rekam terus
  recognition.interimResults=true;    // hasil sementara

  recognition.onresult=(event)=>{
    let text="";
    for(let i=event.resultIndex;i<event.results.length;i++){
      text+=event.results[i][0].transcript;
    }
    output.value=text;
  }

  recognition.onstart=()=>{
    isRecording=true;
    startBtn.disabled=true;
    stopBtn.disabled=false;
    startTimer();
  }

  recognition.onend=()=>{
    // Auto-restart jika masih merekam
    if(isRecording){
      recognition.start();
    } else {
      startBtn.disabled=false;
      stopBtn.disabled=true;
      stopTimer();
    }
  }
}

// Tombol
startBtn.onclick=()=>{
  recognition.lang=languageSelect.value;
  isRecording=true;
  recognition.start();
}
stopBtn.onclick=()=>{
  isRecording=false;
  recognition.stop();
}
copyBtn.onclick=()=>{navigator.clipboard.writeText(output.value).then(()=>alert("Teks berhasil disalin!"));}
</script>
</body>
</html>
